<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>2nd Grade Math Olympiad - 10 Random Question Quiz</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 650px; margin: 2rem auto; }
    .question { font-weight: bold; margin-top: 1.2rem; }
    .options label { display: block; margin: 0.3rem 0; }
    .hidden { display: none; }
    #score { font-weight: bold; color: darkgreen; margin-top: 2rem; }
    #controls { margin-bottom: 2rem; }
  </style>
</head>
<body>
  <h2>2nd Grade Math Olympiad - 10 Random Question Quiz</h2>
  <div id="controls">
    <button id="generate-quiz">Generate New 10-Question Quiz</button>
    <button id="submit-answers">Submit Answers and Score</button>
    <button id="reveal-answers">Reveal All Answers</button>
  </div>
  <div id="quiz"></div>
  <div id="score"></div>
  <script>
    // --- QUESTION GENERATORS ---
    function genAddition() {
      let a = Math.floor(Math.random() * 50) + 10;
      let b = Math.floor(Math.random() * 41) + 10;
      let correct = a + b;
      let options = genOptions(correct, 4, 6, 1);
      return {
        text: `What is the sum of ${a} and ${b}?`,
        options: options,
        answer: options.indexOf(correct.toString())
      }
    }
    function genSubtraction() {
      let a = Math.floor(Math.random() * 41) + 40;
      let b = Math.floor(Math.random() * 31) + 5;
      let correct = a - b;
      let options = genOptions(correct, 4, 5, 1);
      return {
        text: `What is ${a} minus ${b}?`,
        options: options,
        answer: options.indexOf(correct.toString())
      }
    }
    function genComparison() {
      let a = Math.floor(Math.random() * 90) + 10;
      let b = Math.floor(Math.random() * 90) + 10;
      let c = Math.floor(Math.random() * 90) + 10;
      let correct = Math.max(a, b, c);
      let arr = shuffle([a,b,c]);
      let options = arr.map(x=>x.toString());
      while(options.length < 4) {
        let fake = correct + Math.floor(Math.random() * 9 + 1);
        if(!options.includes(fake.toString())) options.push(fake.toString());
      }
      options = shuffle(options);
      return {
        text: 'Which number is greatest?',
        options: options,
        answer: options.indexOf(correct.toString())
      }
    }
    function genSequence() {
      let start = Math.floor(Math.random() * 20);
      let diff = Math.floor(Math.random() * 3) + 2;
      let answers = [start, start+diff, start+2*diff, start+3*diff];
      let correct = start + 4 * diff;
      let options = genOptions(correct, 4, 6, 1);
      return {
        text: `What comes next: ${answers[0]}, ${answers[1]}, ${answers[2]}, ${answers[3]}, ___?`,
        options: options,
        answer: options.indexOf(correct.toString())
      }
    }
    function genMoney() {
      let dimes = Math.floor(Math.random() * 5) + 2;
      let nickels = Math.floor(Math.random() * 5) + 2;
      let correct = dimes*10 + nickels*5;
      let options = genOptions(correct, 4, 10, 5, ' cents');
      return {
        text: `If you have ${dimes} dimes and ${nickels} nickels, how much money (in cents)?`,
        options: options,
        answer: options.indexOf(correct + ' cents')
      }
    }
    function genOptions(correct, n, range, step, suffix='') {
      let opts = [correct + suffix];
      while (opts.length < n) {
        let fake = correct + (Math.floor(Math.random()*range)*step) - Math.floor(range/2)*step;
        if(fake !== correct && fake > 0 && !opts.includes(fake + suffix)) {
          opts.push(fake + suffix);
        }
      }
      return shuffle(opts.map(x=>x.toString()));
    }
    function shuffle(arr) {
      let a = arr.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }
    // -------- END GENERATORS --------
    const generators = [genAddition, genSubtraction, genComparison, genSequence, genMoney];
    let currentQuizSet = [];

    function buildQuiz(questionSet) {
      const quizContainer = document.getElementById('quiz');
      quizContainer.innerHTML = '';
      questionSet.forEach((q, idx) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question';
        qDiv.innerText = `${idx + 1}. ${q.text}`;
        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'options';
        q.options.forEach((opt, i) => {
          const label = document.createElement('label');
          const radio = document.createElement('input');
          radio.type = 'radio';
          radio.name = `question${idx}`;
          radio.value = i;
          label.appendChild(radio);
          label.appendChild(document.createTextNode(` ${String.fromCharCode(97+i)}) ${opt}`));
          optionsDiv.appendChild(label);
        });
        const hiddenAns = document.createElement('div');
        hiddenAns.className = 'hidden';
        hiddenAns.id = `answer${idx}`;
        hiddenAns.innerText = `Answer: ${String.fromCharCode(97+q.answer)} (${q.options[q.answer]})`;
        optionsDiv.addEventListener('change', function(e) {
          if (e.target.name === `question${idx}`) hiddenAns.className = '';
        });
        qDiv.appendChild(optionsDiv);
        qDiv.appendChild(hiddenAns);
        quizContainer.appendChild(qDiv);
      });
      document.getElementById('score').innerHTML = '';
      currentQuizSet = questionSet;
    }

    document.getElementById('generate-quiz').onclick = function() {
      let questions = [];
      for (let i = 0; i < 10; i++) {
        let g = generators[Math.floor(Math.random()*generators.length)];
        questions.push(g());
      }
      buildQuiz(questions);
    };

    document.getElementById('submit-answers').onclick = function() {
      let score = 0;
      let total = currentQuizSet.length;
      currentQuizSet.forEach((q, idx) => {
        const selected = document.querySelector(`input[name='question${idx}']:checked`);
        if (selected && parseInt(selected.value) === q.answer) score++;
      });
      document.getElementById('score').innerHTML = `Score: ${score} / ${total}`;
    };

    document.getElementById('reveal-answers').onclick = function() {
      document.querySelectorAll('[id^=answer]').forEach(ans => ans.className = '');
    };

    // Generate when page loads
    document.getElementById('generate-quiz').onclick();
  </script>
</body>
</html>
