<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>2nd Grade Math Olympiad Quiz</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 2rem auto; }
    .question { font-weight: bold; margin-top: 1.5rem; }
    .options label { display: block; margin: 0.5rem 0; }
    .hidden { display: none; }
    #score { font-weight: bold; color: darkgreen; margin-top: 2rem; }
    #controls { margin-bottom: 2rem; }
  </style>
</head>
<body>
  <h2>2nd Grade Math Olympiad Quiz</h2>
  <div id="controls">
    <button id="generate-random">Generate Random Question</button>
    <button id="submit-answers">Submit Answers and Score</button>
    <button id="reveal-answers">Reveal All Answers</button>
  </div>
  <div id="quiz"></div>
  <div id="score"></div>
  <script>
    // Add your full question set
    const questions = [
      {text: 'Which number is greatest?', options: ['67','52','49','36'], answer: 0},
      {text: 'What is the sum of 23 and 19?', options: ['32','42','41','36'], answer: 2},
      {text: 'If you have 4 dimes and 3 nickels, how much money?', options: ['55 cents','40 cents','35 cents','43 cents'], answer: 0},
      {text: 'Which object has the most corners?', options: ['Square', 'Triangle', 'Circle', 'Rectangle'], answer: 3},
      {text: 'What comes next: 8, 12, 16, ___?', options: ['20', '18', '22', '24'], answer: 0},
      {text: 'Lucy collected 65 seashells, friend found 25. How many in total?', options: ['80', '90', '75', '85'], answer: 0},
      {text: 'If you subtract 15 from 40?', options: ['25', '30', '35', '20'], answer: 0},
      {text: 'Which clock shows time 10 minutes to 9?', options: ['8:50', '9:10', '9:50', '8:45'], answer: 0},
      {text: 'How many days in a fortnight?', options: ['14', '10', '12', '7'], answer: 0},
      {text: 'Alice spends 530 cents shopping, 60 cents travel from 800 cents. Money left?', options: ['170', '210', '200', '130'], answer: 1}
    ];
    
    let usedQuestions = [];
    const quizContainer = document.getElementById('quiz');
    const scoreDiv = document.getElementById('score');

    function buildQuiz(questionSet) {
      quizContainer.innerHTML = '';
      questionSet.forEach((q, idx) => {
        const qDiv = document.createElement('div');
        qDiv.className = 'question';
        qDiv.innerText = `${idx + 1}. ${q.text}`;
  
        const optionsDiv = document.createElement('div');
        optionsDiv.className = 'options';
        q.options.forEach((opt, i) => {
          const label = document.createElement('label');
          const radio = document.createElement('input');
          radio.type = 'radio';
          radio.name = `question${idx}`;
          radio.value = i;
          label.appendChild(radio);
          label.appendChild(document.createTextNode(` ${String.fromCharCode(97+i)}) ${opt}`));
          optionsDiv.appendChild(label);
        });
        const hiddenAns = document.createElement('div');
        hiddenAns.className = 'hidden';
        hiddenAns.id = `answer${idx}`;
        hiddenAns.innerText = `Answer: ${String.fromCharCode(97+q.answer)}`;
        optionsDiv.addEventListener('change', function(e) {
          if (e.target.name === `question${idx}`) hiddenAns.className = '';
        });
        qDiv.appendChild(optionsDiv);
        qDiv.appendChild(hiddenAns);
        quizContainer.appendChild(qDiv);
      });
    }

    // Button - Generate Random Question
    document.getElementById('generate-random').onclick = function() {
      // Pick a random unused question
      if (usedQuestions.length === questions.length) usedQuestions = [];
      let idx;
      do { idx = Math.floor(Math.random() * questions.length); }
      while (usedQuestions.includes(idx));
      usedQuestions.push(idx);
      buildQuiz([questions[idx]]);
      scoreDiv.innerHTML = '';
    };

    // Button - Reveal all answers
    document.getElementById('reveal-answers').onclick = function() {
      document.querySelectorAll('[id^=answer]').forEach(ans => ans.className = '');
    };

    // Button - Submit answers and display score
    document.getElementById('submit-answers').onclick = function() {
      let score = 0;
      let total = quizContainer.querySelectorAll('.question').length;
      quizContainer.querySelectorAll('.question').forEach((qDiv, idx) => {
        const selected = qDiv.querySelector('input[type=radio]:checked');
        if (selected && parseInt(selected.value) === questions[usedQuestions[idx] ?? idx].answer) score++;
      });
      scoreDiv.innerHTML = `Score: ${score} / ${total}`;
    };

    // Initialize full quiz on page load
    buildQuiz(questions);
  </script>
</body>
</html>
